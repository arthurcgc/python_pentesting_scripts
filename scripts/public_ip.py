import urllib.request
import urllib.error


def get_public_ip(request_target):
    grabber = urllib.request.build_opener()
    grabber.addheaders = [('User-agent', 'Mozilla/5.0')]

    try:
        public_ip_address = grabber.open(request_target).read()

    except urllib.error.HTTPError as error:
        print("There was an error trying to get your Public IP: {}"
              .format(error))

    except urllib.error.URLError as error:
        print("There was an error trying to get your Public IP: {}"
              .format(error))

    return public_ip_address

target_url = "http://ip.42.pl/raw"

public_ip = get_public_ip(target_url)

if public_ip is not None:
    print(" Your public IP address is: {}".format(
        str(public_ip.decode('utf - 8'))))
else:
    print("Your Public IP adress was not found")
